<!DOCTYPE html>
<html lang="en">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">

    <link crossorigin="anonymous" media="all"
          integrity="sha512-iwkZZWcsyMNnn/6c9v2ab3e7h4ZiFTOEZ9R6jj75bN9JzYuYjQ/AC7ufEcfpqd4GcTwcM+p2OhPzRSyeKL7NMQ=="
          rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-f331a618befc2bf99be870c538f9ac95.css" />

    <link crossorigin="anonymous" media="all"
          integrity="sha512-n7wCtdLgDcghSWgsFTdps21dNMwiOXylrMR9MG5cVIFBtu8cuHIczV1oEe9h0TRndtwW8PoTgod9kNNPGOQJ+g=="
          rel="stylesheet" href="https://github.githubassets.com/assets/github-aab0e3cd94d57631327dceb60c188704.css" />

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


    <title>Commits · sudhof/politeness</title>




</head>

<body class="logged-in env-production emoji-size-boost">






<div class="application-main " data-commit-hovercards-enabled>
    <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
        <main id="js-repo-pjax-container" data-pjax-container>








            <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
                <div class="repohead-details-container clearfix container">

                    <ul class="pagehead-actions">



                        <li>

                            <!-- '"` -->
                            <!-- </textarea></xmp> -->


                            <details class="details-reset details-overlay select-menu float-left">
                                <summary class="select-menu-button float-left btn btn-sm btn-with-count"
                                         data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;WATCH_BUTTON&quot;,&quot;repository_id&quot;:24033806,&quot;client_id&quot;:&quot;1956716977.1556370267&quot;,&quot;originating_request_id&quot;:&quot;A5E0:8F62:108CFD:1A6D81:5CC57B10&quot;,&quot;originating_url&quot;:&quot;https://github.com/sudhof/politeness/commits/master&quot;,&quot;referrer&quot;:&quot;https://www.cs.cornell.edu/~cristian/Politeness.html&quot;,&quot;user_id&quot;:22998328}}"
                                         data-hydro-click-hmac="4adf720f97e03480ebb776597a9e6410e9aed042f6c38ffdf2f3dda9b281aaf2"
                                         data-ga-click="Repository, click Watch settings, action:commits#show"> <span data-menu-button>
                      <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16"
                           height="16" aria-hidden="true">
                        <path fill-rule="evenodd"
                              d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z" />
                      </svg>
                      Watch
                    </span>
                                </summary>

                            </details>
                            <a class="social-count js-social-count" href="/sudhof/politeness/watchers"
                               aria-label="4 users are watching this repository">
                                4
                            </a>

                        </li>
                    </ul>

                    <h1 class="public ">
                        <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16"
                             aria-hidden="true">
                            <path fill-rule="evenodd"
                                  d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z" />
                        </svg>
                        <span class="author" itemprop="author"><a class="url fn" rel="author" data-hovercard-type="user"
                                                                  data-octo-dimensions="link_type:self" href="/sudhof">sudhof</a></span>
                        <!--
          --><span class="path-divider">/</span>
                        <!--
          --><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="/sudhof/politeness">politeness</a></strong>


                    </h1>

                </div>



            </div>
            <div class="container new-discussion-timeline experiment-repo-nav  ">
                <div class="repository-content ">



                    <div class="commits-listing commits-listing-padded js-navigation-container js-active-navigation-container"
                         data-navigation-scroll="page">
                        <div class="commit-group-title">
                            <svg class="octicon octicon-git-commit" viewBox="0 0 14 16" version="1.1" width="14" height="16"
                                 aria-hidden="true">
                                <path fill-rule="evenodd"
                                      d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z" />
                            </svg>Commits
                        </div>

                        <!-- MARK!!! -->
                        <div class="row">
                            <div class="col-8">
                                <div class="list-group" id="list-tab" role="tablist">
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="tab-content" id="nav-tabContent">
                                    
                                </div>
                            </div>
                        </div>
                    </div>




                </div>
                <div class="modal-backdrop js-touch-events"></div>
            </div>

        </main>
    </div>


</div>






<div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
        <path fill-rule="evenodd"
              d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z" />
    </svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
        <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true">
            <path fill-rule="evenodd"
                  d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z" />
        </svg>
    </button>
    You can’t perform that action at this time.
</div>



<script crossorigin="anonymous"
        integrity="sha512-qhw17OJKRsHlqoKCXjqRhTVlRzTIp1648QernWGDuKoUYnNfCR6NKdd8zN7/cnLgRBHGMvsmYVt1DeRFgD2YYQ=="
        type="application/javascript" src="https://github.githubassets.com/assets/frameworks-35254b98.js"></script>

<script crossorigin="anonymous" async="async"
        integrity="sha512-CiL8iKt7ZpLTFsGCjW+3PUdYonG73rfip5/sB56G4WxkuBQh84VH/WKf2Y5+Q44gNmvUpXNPaqx6HbT6Unetyw=="
        type="application/javascript" src="https://github.githubassets.com/assets/github-bootstrap-e4bd1989.js"></script>



<div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner" hidden>
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
        <path fill-rule="evenodd"
              d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z" />
    </svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your
      session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your
      session.</span>
</div>
<template id="site-details-dialog">
    <details class="details-reset details-overlay details-overlay-dark lh-default text-gray-dark" open>
        <summary aria-haspopup="dialog" aria-label="Close dialog"></summary>
        <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast">
            <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button"
                    aria-label="Close dialog" data-close-dialog>
                <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true">
                    <path fill-rule="evenodd"
                          d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z" />
                </svg>
            </button>
            <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
        </details-dialog>
    </details>
</template>

<div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
    <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large"
         style="width:360px;">
    </div>
</div>

<div aria-live="polite" class="js-global-screen-reader-notice sr-only"></div>

</body>

<script type="text/javascript" th:inline="javascript">
    var $_h = jQuery.noConflict();

    $_h(function () {
        /*<![CDATA[*/
        var theList = [[${list}]];
        // MARK
        var list=document.getElementById("list-tab");
        var datalist=document.getElementById("nav-tabContent");

        for (i = 0; i < theList.length; i++) {
            list.append( document.createElement("br") );



            var item=document.createElement("div");
            item.classList.add("list-group-item");
            item.classList.add("list-group-item-action");
            item.setAttribute("id","list-"+i+"-list");
            item.setAttribute("data-toggle","list");
            item.setAttribute("href","#data-list-"+i);
            item.setAttribute("role","tab");
            item.setAttribute("aria-controls",i);
            item.innerText=theList[i].date+"  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u00a0\u00a0  "+theList[i].low+"   \u00a0 \u00a0 \u00a0 \u00a0          "+theList[i].high;

            if (theList[i].low<-1) {
                var neg=document.createElement("img");
                neg.setAttribute("src","/image/sad.png");
                neg.setAttribute("style","width:30px;height:30px;");
                neg.setAttribute("align","right");
                item.append(neg);
            }

            if (theList[i].high>1) {
                var pos=document.createElement("img");
                pos.setAttribute("src","/image/a.png");
                pos.setAttribute("style","width:30px;height:30px;");
                pos.setAttribute("align","right");
                item.append(pos);
            }

            list.append(item);

            var data=document.createElement("div");
            data.classList.add("tab-pane");
            data.classList.add("fade");

            data.setAttribute("id","data-list-"+i);
            data.setAttribute("role","tabpanel");
            data.setAttribute("aria-labelledby","list-"+i+"-list");
            var text=document.createElement("p");
            text.textContent=theList[i].comment;
            data.append(text);

            datalist.append(data);


        }



        $_h('#list-tab div').on('click', function (e) {

            var id= $_h(this).attr("id");
            var o=theList[id.split('-')[1]];

            var formData = new FormData();
            formData.append("text", o.comment);

            var check=document.getElementById(id.split('-')[1]+"politness");
            if (check==null) {

                var loading=document.createElement("div");
                loading.classList.add("spinner-border");
                loading.setAttribute("id","loading_"+id.split('-')[1]);
                loading.setAttribute("role","status");
                var loadingspan=document.createElement("span");
                loadingspan.classList.add("sr-only");
                loadingspan.textContent="Loading...";

                loading.append(loadingspan);
                document.getElementById("data-list-" + id.split('-')[1]).append(loading);


                var xhr = new XMLHttpRequest();
                xhr.open("POST", "http://politeness.cornell.edu/score-politeness");
                xhr.send(formData);
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4)
                        if (xhr.status == 200) {
                            var json_data = xhr.responseText;
                            document.getElementById("loading_"+id.split('-')[1]).style.display = "none";
                            // $_h("loading_"+id.split('-')[1]).hide();
                            console.log("data-list-" + id.split('-')[1]);
                            var comment = document.getElementById("data-list-" + id.split('-')[1]);
                            var politeness = document.createElement("div");
                            var test_data = JSON.parse(json_data);
                            console.log(test_data['label']);
                            politeness.setAttribute("id", id.split('-')[1] + "politness");
                            console.log(json_data);
                            if (test_data['label']=='polite') {
                                politeness.innerText = "礼貌的";
                            }
                            else if (test_data['label']=='neutral'){
                                politeness.innerText = "中性的";
                            }else{
                                politeness.innerText = "不礼貌的";
                            }

                            politeness.innerText+="\n\n置信度："+test_data['confidence'];
                            politeness.style.marginTop="200px";
                            comment.append(politeness);

                            // console.log(json_data)
                        }

                };
            }

        });
    });



</script>

</html>